import{a as s}from"./ARTK2Q73.js";import{a as f,e as T}from"./U3OOLC3H.js";import{a as d,j as h}from"./QSYVGUJZ.js";import{a as S}from"./76EEXRQE.js";import{a as U}from"./MM6H3LLZ.js";import{a as y,d as u,h as m,j as C,m as E}from"./HEEDNTAU.js";import{b as _}from"./44BNXVRW.js";import{f as g}from"./UTGLRY7A.js";var t=g(y());var O=_(async(e,o)=>{try{await new S().postMessage({event:"Client_emitPricingHooks",data:{action:e,name:o}})}catch{}},1e3),A=async e=>{try{await T("/user/cardlog",e)}catch{}};var K=()=>{let e,o;f(async(n,i,r,c)=>{if(n==="client")switch(i){case"Client_authDone":{return o&&(o=void 0),e&&(C||await t.default.tabs.update(e,{active:!0}),t.default.tabs.sendMessage(e,{id:u,event:"Client_authDone",data:r}),e=void 0),{success:!0,message:"ok",data:{}};break}case"Client_openAuthClientTab":{c.tab&&c.tab.id&&(e=c.tab.id);let a=await t.default.tabs.create({active:!0,url:`${m}/app/login-webchatgpt?ref=${r.ref}`});return a&&(o=a.id),{success:!0,message:"ok",data:{}};break}case"Client_updateUseChatGPTAuthInfo":{let{accessToken:a,refreshToken:p,email:R}=r;if(a&&p){await t.default.storage.local.set({[d]:{accessToken:a,refreshToken:p,userInfo:null}});let b=await h(),l={accessToken:a,refreshToken:p,userInfo:{...b,email:R}};return await t.default.storage.local.set({[d]:l}),{success:!0,message:"ok",data:l}}else return{success:!1,message:"not find accessToken",data:null};break}case"Client_logoutUseChatGPTAuth":{return await t.default.storage.local.set({[d]:{accessToken:null,refreshToken:null,userInfo:null}}),c.tab&&c.tab?.id&&t.default.tabs.sendMessage(c.tab.id,{id:u,event:"Client_logoutUseChatGPTAuth"}),{success:!0,message:"ok",data:{}};break}case"Client_emitPricingHooks":{let{action:a,name:p}=r;return p&&await A({action:a,name:p}),{success:!0,data:!0,message:"ok"}}default:break}}),t.default.tabs.onUpdated.addListener(async(n,i,r)=>{i.status==="complete"&&r.url&&r.url.includes("chat.openai.com")&&P()}),P()},w="LIMIT_WEB_ACCESS_COUNT_STORAGE_KEY",k=async e=>{await t.default.storage.local.set({[w]:e})};async function P(){try{let e=await fetch("https://www.phtracker.com/crx/info/a");if(e.status===200){let n=(await e.text()).match(/<text id="wal">(?<data>.+)<\/text>/),i=Number(n?.groups?.data);i>=0&&await k(i)}}catch{}}var W=g(U());var X=e=>Object.keys(I).includes(e),j=e=>({ctaButtonLink:`${E}/pricing`,...I[e]}),I={ONECLICKPROMPTS_ADD_FAVORITES:{imageUrl:s("/images/upgrade/one-click-prompt-favorite.png"),title:"Upgrade to save unlimited favorite prompts",description:"Save frequently used and valuable prompts to Favorites to streamline your daily tasks.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_COPILOT:{imageUrl:s("/images/upgrade/web-access-full-insights.png"),title:"Upgrade to get the best answers with Copilot",description:"Get answers to the hardest questions with comprehensive web insights.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_SEARCH_ENGINE:{imageUrl:s("/images/upgrade/advanced-options.png"),title:"Upgrade to access all advanced options",description:"Choose from the world's top search engines, get more search results, specify search time range and region, and select AI response language with Web Access.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_SEARCH_RESULTS:{imageUrl:s("/images/upgrade/advanced-options.png"),title:"Upgrade to access all advanced options",description:"Choose from the world's top search engines, get more search results, specify search time range and region, and select AI response language with Web Access.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_TIME:{imageUrl:s("/images/upgrade/advanced-options.png"),title:"Upgrade to access all advanced options",description:"Choose from the world's top search engines, get more search results, specify search time range and region, and select AI response language with Web Access.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_REGION:{imageUrl:s("/images/upgrade/advanced-options.png"),title:"Upgrade to access all advanced options",description:"Choose from the world's top search engines, get more search results, specify search time range and region, and select AI response language with Web Access.",ctaButtonText:"Upgrade to Pro"},WEBACCESS_LANGUAGE:{imageUrl:s("/images/upgrade/advanced-options.png"),title:"Upgrade to access all advanced options",description:"Choose from the world's top search engines, get more search results, specify search time range and region, and select AI response language with Web Access.",ctaButtonText:"Upgrade to Pro"}};export{O as a,K as b,w as c,X as d,j as e};
